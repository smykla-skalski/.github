---
# yaml-language-server: $schema=https://raw.githubusercontent.com/smykla-labs/.github/main/schemas/sync-config.schema.json
# Unified Sync Configuration Schema
# ==================================
# Place this file at: .github/sync-config.yml in your repository
#
# This configuration controls how the organization's sync system
# synchronizes labels, files, settings, and smyklot to your repository.
#
# All fields are optional - omit any field to use its default value.
# An empty or missing config file enables all syncs with default behavior.

# ---------------------------------------------------------------------------
# SCHEMA REFERENCE
# ---------------------------------------------------------------------------
#
# sync:                          # Top-level sync configuration
#   skip: bool                   # Skip ALL syncs (default: false)
#
#   labels:                      # Label sync configuration
#     skip: bool                 # Skip label sync (default: false)
#     exclude: [string]          # Label names to exclude from sync
#     allow_removal: bool        # Delete non-central labels (default: false)
#
#   files:                       # File sync configuration
#     skip: bool                 # Skip file sync (default: false)
#     exclude: [string]          # File paths to exclude from sync
#     allow_removal: bool        # Delete non-central files (default: false)
#
#   smyklot:                     # Smyklot version sync configuration
#     skip: bool                 # Skip smyklot version sync (default: false)
#
#   settings:                    # Settings sync configuration
#     skip: bool                 # Skip settings sync (default: false)
#     exclude: [string]          # Settings paths to exclude from sync
#
# ---------------------------------------------------------------------------
# FIELD DETAILS
# ---------------------------------------------------------------------------
#
# sync.skip (boolean, default: false)
#   When true, completely skips ALL synchronization for this repository.
#   Use for repositories that should be entirely excluded from org sync.
#   Equivalent to setting both labels.skip and files.skip to true.
#
# sync.labels.skip (boolean, default: false)
#   When true, skips label synchronization only.
#   File sync still runs unless sync.skip or sync.files.skip is true.
#
# sync.labels.exclude (array of strings, default: [])
#   List of label names to exclude from synchronization.
#   These labels will NOT be created/updated in this repository.
#   Existing labels with these names are preserved but not managed.
#   Example: ["ci/skip-tests", "ci/force-full"]
#
# sync.labels.allow_removal (boolean, default: false)
#   When true, labels in this repo that are NOT in the central config
#   will be DELETED. Use with caution - this removes custom labels.
#   When false (default), extra labels in the repo are preserved.
#
# sync.files.skip (boolean, default: false)
#   When true, skips file synchronization only.
#   Label sync still runs unless sync.skip or sync.labels.skip is true.
#
# sync.files.exclude (array of strings, default: [])
#   List of file paths (relative to repo root) to exclude from sync.
#   These files will NOT be created/updated in this repository.
#   Existing files at these paths are preserved but not managed.
#   Example: ["CONTRIBUTING.md", ".github/PULL_REQUEST_TEMPLATE.md"]
#
# sync.files.allow_removal (boolean, default: false)
#   DANGEROUS: When true, files in this repo that are NOT in the central
#   sync config will be DELETED. This can cause data loss.
#   Strongly recommend keeping this false (default).
#
# sync.smyklot.skip (boolean, default: false)
#   When true, skips smyklot version synchronization only.
#   Label and file sync still run unless their respective skip flags are set.
#   Use this for repos that don't use smyklot or manage their own versions.
#
# sync.settings.skip (boolean, default: false)
#   When true, skips settings synchronization only.
#   Use this for repos that require custom settings management.
#
# sync.settings.exclude (array of strings, default: [])
#   List of settings paths to exclude from synchronization.
#   Paths use dot notation to reference nested fields.
#   Examples: ["branch_protection", "security.secret_scanning", "features.has_wiki"]
#   Entire sections or individual fields can be excluded.
#
# ---------------------------------------------------------------------------
# EXAMPLES
# ---------------------------------------------------------------------------

# Example 1: Default configuration (all syncs enabled)
# Just create an empty file or omit entirely - defaults apply
sync: {}

# Example 2: Skip all synchronization for this repo
# sync:
#   skip: true

# Example 3: Documentation-only repo (skip CI labels, keep custom docs)
# sync:
#   labels:
#     exclude:
#       - "ci/skip-tests"
#       - "ci/skip-lint"
#       - "ci/skip-build"
#       - "ci/force-full"
#   files:
#     exclude:
#       - "CONTRIBUTING.md"      # Keep custom contributing guide
#       - "CODE_OF_CONDUCT.md"   # Keep custom code of conduct

# Example 4: Strict sync with label cleanup
# sync:
#   labels:
#     allow_removal: true  # Remove labels not in central config
#   files:
#     exclude:
#       - ".github/ISSUE_TEMPLATE/custom-template.yml"

# Example 5: Skip file sync only (labels still sync)
# sync:
#   files:
#     skip: true

# Example 6: Skip smyklot sync only (for repos that don't use smyklot)
# sync:
#   smyklot:
#     skip: true

# Example 7: Skip settings sync only (for repos requiring custom settings)
# sync:
#   settings:
#     skip: true

# Example 8: Exclude specific settings (keep custom branch protection)
# sync:
#   settings:
#     exclude:
#       - "branch_protection"          # Keep all custom branch protection rules
#       - "security.secret_scanning"   # Keep custom secret scanning config
#       - "features.has_wiki"          # Keep wiki enabled

# Example 9: Full customization
# sync:
#   skip: false
#   labels:
#     skip: false
#     exclude:
#       - "release/major"
#       - "release/minor"
#       - "release/patch"
#     allow_removal: false
#   files:
#     skip: false
#     exclude:
#       - "SECURITY.md"
#       - ".github/PULL_REQUEST_TEMPLATE.md"
#     allow_removal: false
#   smyklot:
#     skip: false
#   settings:
#     skip: false
#     exclude:
#       - "features.has_discussions"
